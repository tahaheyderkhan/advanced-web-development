<script>
// -------- Arrow Function with Array Methods --------
let numbers1 = [1,2,3,4,5];
let squared = numbers1.map(n => n*n);
console.log(squared); // har number ka square // [1,4,9,16,25]

// -------- Variable Scope --------
function outer(){
  let x = 10;
  function inner(){
    console.log(x); // inner fn outer ka variable use kr skta h
  }
  inner();
}
outer(); // prints 10



// -------- Closure --------
function createCounter(){
  let count = 0; // private variable
  return function(){
    count++;
    console.log(count); // har call pe +1 hota h
  }
}
let counter1 = createCounter();
let counter2 = createCounter();
counter1(); // 1
counter1(); // 2
counter2(); // 1 (independent counter)



// -------- Simple Default Parameters --------
function greet(name, msg="Hello"){
  console.log(msg + ", " + name);
}
greet("Haseeb"); // Hello, Haseeb
greet("Haseeb","Salam"); // Salam, Haseeb



// -------- Default Parameters with Other Args --------
function calculateArea(width=10, height=5){
  return width*height;
}
console.log(calculateArea()); // default use -> 50
console.log(calculateArea(4,3)); // custom -> 12



// -------- Square Numbers (map) --------
let nums = [1,2,3,4,5];
let sq = nums.map(n => n*n);
console.log(sq); // [1,4,9,16,25]



// -------- Convert to Uppercase --------
let words1 = ["apple","banana","cherry"];
let upper = words1.map(w => w.toUpperCase());
console.log(upper); // ["APPLE","BANANA","CHERRY"]



// -------- Filter Even Numbers --------
let numbers2 = [1,2,3,4,5,6,7,8,9,10];
let evens = numbers2.filter(n => n%2===0);
console.log(evens); // [2,4,6,8,10]



// -------- Filter Long Words --------
let words2 = ["apple","banana","cherry","date"];
let longWords = words2.filter(w => w.length>5);
console.log(longWords); // ["banana","cherry"]



// -------- Log Numbers (forEach) --------
let numbers3 = [1,2,3,4,5];
numbers3.forEach(n => console.log(n)); // har number print



// -------- Log Word Lengths --------
let words3 = ["apple","banana","cherry"];
words3.forEach(w => console.log(w.length)); // 5,6,6



// -------- Sum of Numbers (reduce) --------
let numbers4 = [1,2,3,4,5];
let sum = numbers4.reduce((a,b)=>a+b,0);
console.log(sum); // 15



// -------- Concatenate Strings --------
let words4 = ["Hello","world","this","is","JavaScript"];
let sentence = words4.reduce((a,b)=>a+" "+b);
console.log(sentence); // Hello world this is JavaScript



// -------- Check for Even Number (some) --------
let numbers5 = [1,3,5,7,8];
console.log(numbers5.some(n=>n%2===0)); // true



// -------- Check for Long Word (some) --------
let words5 = ["apple","banana","cherry","date"];
console.log(words5.some(w=>w.length>5)); // true




// -------- Check All Even Numbers (every) --------
let numbers6 = [2,4,6,8,10];
console.log(numbers6.every(n=>n%2===0)); // true




// -------- Check All Long Words (every) --------
let words6 = ["elephant","giraffe","hippopotamus"];
console.log(words6.every(w=>w.length>5)); // true




// -------- Find First Even Number --------
let numbers7 = [1,3,5,7,8];
console.log(numbers7.find(n=>n%2===0)); // 8




// -------- Find Long Word --------
let words7 = ["apple","banana","cherry","date"];
console.log(words7.find(w=>w.length>5)); // banana




// -------- Find Index of First Even Number --------
let numbers8 = [1,3,5,7,8];
console.log(numbers8.findIndex(n=>n%2===0)); // 4




// -------- Find Index of Long Word --------
let words8 = ["apple","banana","cherry","date"];
console.log(words8.findIndex(w=>w.length>5)); // 1




// -------- Simple Promise --------
function delay(ms){
  return new Promise(res => setTimeout(res, ms));
}
delay(2000).then(()=>console.log("Hello, world!")); 
// 2 sec baad print hoga



// -------- Promise Chain --------
function fetchData(){
  return Promise.resolve({id:1, name:"Haseeb"});
}
fetchData().then(data => console.log(data)); 
// data print karega





// -------- Error Handling in Promise --------
function fetchUserData(){
  return new Promise((res,rej)=>{
    let user = {name:"Ali"}; // no age
    if(user.age){ res(user); } 
    else { rej("Age property missing!"); }
  });
}
fetchUserData()
  .then(data=>console.log(data))
  .catch(err=>console.log("Error:",err)); 



// -------- Simulate Network Request --------
function getWeather(){
  return new Promise((res,rej)=>{
    setTimeout(()=>{
      let ok = Math.random()>0.5;
      if(ok) res("Sunny 30Â°C");
      else rej("Network error");
    },1000);
  });
}
getWeather()
  .then(data=>console.log("Weather:",data))
  .catch(err=>console.log("Error:",err));


  
// -------- Simple async Function --------
async function sayHello(){
  await delay(2000); // use delay fn upar wala
  console.log("Hello, world!");
}
sayHello();




// -------- Fetch Data with async/await --------
async function getUserData(){
  try{
    let data = await fetchUserData(); // upar wala fn
    console.log("User:",data);
  }catch(err){
    console.log("Error:",err);
  }
}
getUserData();




// -------- Fetch and Process Data --------
function fetchUser(){
  return Promise.resolve({id:1,name:"Haseeb",age:24});
}
function fetchPosts(userId){
  return Promise.resolve(["Post1","Post2"]);
}
async function getUserAndPosts(){
  let user = await fetchUser();
  let posts = await fetchPosts(user.id);
  console.log(user, posts);
}
getUserAndPosts();



// -------- Error Handling in async/await --------
function fetchUser2(){
  return new Promise((res,rej)=>{
    let user = null; // no data
    if(user) res(user);
    else rej("User not found!");
  });
}
async function getUserInfo(){
  try{
    let user = await fetchUser2(); // upar wala fn
    console.log("User:",user);
  }catch(err){ // error handle
    console.log("Error:",err);
  }
}
getUserInfo();




// -------- Simulate API Calls --------
function apiCall(){
  return new Promise((res,rej)=>{
    let time = Math.floor(Math.random()*2000); // 0-2 sec
    setTimeout(()=>{
      res("Data after "+time+"ms");
    },time);
  });
}
async function getData(){
  try{
    let d1 = await apiCall();
    console.log(d1);
    let d2 = await apiCall();
    console.log(d2);
    let d3 = await apiCall();
    console.log(d3);
  }catch(err){
    console.log("Error:",err);
  }
}
getData();
</script>
